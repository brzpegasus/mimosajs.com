<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Compilers - Mimosa</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="css/main.css"> -->
  <link rel="stylesheet" href="css/bootstrap.min.css" >
  <link rel="stylesheet" href="css/bootstrap-responsive.min.css" >
  <link rel="stylesheet" href="css/app.css">

  <link rel="shortcut icon" href="img/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li class="">
              <a href="./index.html">Mimosa</a>
            </li>
            <li class="active">
              <a href="./started.html">Getting Started</a>
            </li>
            <li class="">
              <a href="./commands.html">Commands</a>
            </li>
            <li class="">
              <a href="./compilers.html">Compilers</a>
            </li>
   <!--         <li class="">
              <a href="./server.html">Server</a>
            </li>
            <li class="">
              <a href="./require.html">RequireJS + Optimization</a>
            </li>
            <li class="">
              <a href="./misc.html">Misc Goodness</a>
            </li>
            <li class="">
              <a href="./examples.html">Examples</a>
            </li> -->
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container main">

  <header class="jumbotron subhead" id="overview">
    <h1>Compilers</h1>
    <p class="lead">JavaScript, CSS, Micro-Templating. You write it, Mimosa will compile it.</p>
    <div class="subnav">
      <ul class="nav nav-pills">
        <li><a href="#workflow" title="General compiler info">Compiler Workflow</a></li>
        <li><a href="#js" title="JavaScript Meta-Language Compilers">JavaScript</a></li>
        <li><a href="#css" title="CSS Meta-Language Compilers">CSS</a></li>
        <li><a href="#mt" title="Micro-Templates galore">Micro-Templates</a></li>
        <li><a href="#copy" title="Copy JS/CSS and other assets like images">Copy</a></li>
        <li><a href="#more" title="Use a demo app">More?</a></li>
      </ul>
    </div>
  </header>

  <section class="command-list compilers">
    <section id="workflow">
      <div class="page-header">
        <h1>
          Compiler Workflow <small><span class="options">watch, compile, lint, output, notify </span></small>
        </h1>
      </div>

      <h2>1) watch</h2>

      <p> Mimosa watches the directory configured with the <code class="option">watch.sourceDir</code> property in your mimosa-config, by default the <code class="option">assets</code> directory.  Whenever you add, update or delete files from that directory, Mimosa's workflow kicks off.</p>

      <h2>2) compile</h2>

      <p>When Mimosa detects changes in your <code class="option">watch.sourceDir</code>, it checks to see if the extension is one it recognizes as associated with your configured compilers.  If it doesn't recognize the file extension, Mimosa lets you know on the console.  If it does recognize it, Mimosa compiles the changed files to their destination format.</p>

      <p>If a compile fails, you will be notified immediately, both via <a href="http://growl.info/">Growl</a> (if you have it installed), and on the terminal console where you started Mimosa.  When compilation fails, Mimosa will go no further with the workflow.</p>

      <p>Mimosa has three sets of compilers.  JavaScript, CSS, and Templates.  Each compiler has its own section of config in the mimosa-config.coffee file under <code class="option">compilers</code>.  All three share two configuration parameters: <code class="option">compileWith</code> and <code class="option">extensions</code>.  <code class="option">compileWith</code> is a string that indicates which compiler you want to use.  <code class="option">extensions</code> is an array of extensions to associate with that compiler. Each compiler has a default setting for <code class="option">extensions</code>  In the sections below detailing each of the compilers, the <code class="option">compileWith</code> strings are listed, along with the default <code class="option">extensions</code>.

      <h2>3) lint</h2>

      To 'lint' your code is to check it for common mistakes or variances from the idiom.  Both your successfully compiled CSS and JavaScript will pass through a linting step and output lint errors as warnings to the console.  Lint errors will not stop the rest of the workflow from pushing on, but they'll be there when you want to go clean things up.

      <h2>4) output</h2>

      <p>For all Mimosa commands except <code class="option">virgin</code>, Mimosa will output the compiled code to the <code class="option">watch.compiledDir</code>.  <code class="option">virgin</code> does not write the output.</p>

      <h2>5) notify</h2>

      <p>Throughout the workflow, if something goes wrong, you'll be notified.  And if everything is successful, you'll be notified of that too.  Notifications are configurable, so if you aren't happy with the notifications you are receiving, you can switch things up.</p>

    </section>
    <section id="js">
      <div class="page-header">
        <h1>
          JavaScript Compilers
        </h1>
      </div>
      <div class="row">
        <div class="span6">
          <p>After successful compilation of your JavaScript meta-language files, Mimosa will run those files through <a href="http://www.jshint.com/">jshint</a>. jshint will run the compiled JavaScript though a <a href="http://www.jshint.com/docs/">number of checks</a> to validate it against what jshint considers idiomatic JavaScript.  Any rules that get broken will be written to the console as warnings.
          </p>
          <p>
            The mimosa-config has an entire section devoted to linting.  It will let you configure lint rules using the <a href="http://www.jshint.com/docs/">jslint configuration</a> and it will let you turn off jslint for your compiled code entirely if it becomes too distracting.
          </p>
        </div>
        <div class="span6 term">
          <div class="inner">
            <span class="warn">17:06:35 - JavaScript Lint Error: Use '===' to compare with '0'., in file [/Users/you/sandbox/webapp/public/javascripts/app/views/network/driver.js], at line number [467]
            </span><br/>
            <span class="warn">17:06:35 - JavaScript Lint Error: Missing semicolon., in file [/Users/you/sandbox/webapp/public/javascripts/app/views/network/driver.js], at line number [610]
            </span>
          </div>
        </div>
      </div>
      <p>Mimosa currently supports the following JavaScript Meta-Languages:</p>

      <h2>CoffeeScript <small><span class="mim">coffee</span> <span class="command">['coffee']</span></small></h2>
      <p><a href="http://coffeescript.org/">CoffeeScript</a> is the Mimosa default. If you do not alter Mimosa's configuration, Mimosa will look for files ending in .coffee and treat them as CoffeeScript files.</p>

      <h2>Iced CoffeeScript <small><span class="mim">iced</span> <span class="command">['iced']</span></small></h2>
      <p><a href="http://maxtaco.github.com/coffee-script/">Iced CoffeeScript</a> is available as an option for folks who want some async sugar in their Coffee.</p>

    </section>
    <section id="css">
      <div class="page-header">
        <h1>
          CSS Compilers
        </h1>
      </div>
      <div class="row">
        <div class="span6">
          <p>After successful compilation of your CSS meta-language files, Mimosa will run those files through <a href="http://csslint.net/">csslint</a>. csslint will run the compiled CSS though a <a href="https://github.com/stubbornella/csslint/wiki/Rules">number of checks</a> to validate it against what csslint considers idiomatic CSS.  Any rules that get broken will be written to the console as warnings.
          </p>
          <p>
            The mimosa-config has an entire section devoted to linting.  It will let you configure lint rules using the <a href="https://github.com/stubbornella/csslint/wiki/Rules">csshint configuration</a> and it will let you turn off csshint for your compiled code entirely if it becomes too distracting.
          </p>
        </div>
        <div class="span6 term">
          <div class="inner">
            <span class="warn">17:33:36 - CSSLint Warning: Using height with padding-top can sometimes make elements larger than you expect. In /Users/you/sandbox/webapp/public/stylesheets/style.css, on line 292, column 3, from CSSLint rule ID 'box-model'.
            </span><br/>
            <span class="warn">17:33:36 - CSSLint Warning: Element (li.link) is overqualified, just use .link without element name. In /Users/you/sandbox/webapp/public/stylesheets/style.css, on line 304, column 22, from CSSLint rule ID 'overqualified-elements'.
            </span>
          </div>
        </div>
      </div>
      <br/>
      <p>Mimosa does a little bit of extra work with your CSS meta-langauges.  It will take care to not compile files that do not need compiling.  If all of your CSS gets included back through a single base CSS file, changing a file deep down the tree of includes will only trigger a compile of that single base file and not the changed file itself.  Similarly if you have multiple base files, changing a file that is included in two places will trigger the recompile of those two files.</p>

      <p>For the most part this isn't an Earth-shattering feature, and for most of the compilers, compilation time is so fast it doesn't matter.  Users of SASS via JRuby will be greatly appreciative though, that Mimosa isn't going to recompile everything every time they save their SASS code.</p>

      <h2>SASS w/Compass <small><span class="mim">sass</span> <span class="command">["scss", "sass"]</span></small></h2>
      <p><a href="http://sass-lang.com/">SASS</a> w/<a href="http://compass-style.org/">Compass</a> is the Mimosa default. If you do not alter Mimosa's configuration, Mimosa will look for files ending in .sass or .scss and treat them as SASS files.  SASS <a href="http://sass-lang.com/">(install)</a> and Compass <a href="http://compass-style.org/install/">(install)</a> are Ruby gems and there isn't yet a full implementation of them in nodejs, so Mimosa is dependent on you having installed them yourself.  Compass isn't a necessary install, but Mimosa will quickly complain if you attempt to configure it to use SASS and do not have it installed.</p>

      <h2>Stylus w/nib <small><span class="mim">stylus</span> <span class="command">["styl"]</span></small></h2>
      <p>Mimosa will compile your <a href="http://learnboost.github.com/stylus/">Stylus</a> and will include <a href="http://visionmedia.github.com/nib/">nib</a> in the compilation, so all of nib's functionality is available to you.  Stylus (and nib) is a node library, so there is no need to install anything to use it, and Stylus compiles will be speedy.</p>

      <h2>LESS <small><span class="mim">less</span> <span class="command">["less"]</span></small></h2>
      <p>Mimosa will happily compile your <a href="http://lesscss.org/">LESS</a>.  LESS is a node library, so there is no need to install anything to use it, and LESS compiles will be speedy.</p>
    </section>
    <section id="mt">
      <div class="page-header">
        <h1>
          Micro-Template Compilers
        </h1>
      </div>
      <p>Listed below are the different micro-templating libraries Mimosa has built in. For performance reasons, it is best to pre-compile your templates on the server, and serve up those pre-compiled templates. Mimosa will pre-compile your templates for you. As with the CSS and JavaScript meta-languages, your micro-templates will be compiled when saved.

      <p>In all cases, the resulting compiled templates will be merged into a single file for use in the client. Within that file will be @sourceUrl like information to allow you to easily track errors back to specific files in your codebase. The name and location of that single file is configurable <code class="option">(compilers.template.outputFileName)</code>, but by default it is kept at <code class="option">javascripts/templates.js</code>. When this file is injected via require, the behavior differs per library, see below.

      <p>For each templating langauge, the injected javascript file provides a JSON object of templates, keyed by the name of the the template originated in.</p>

      <p>Most of the libraries require a client side version to run the compiled templates. Mimosa will handle including that library for you. It will place an AMD wrapped version of the library inside the javascripts/vendor library and reference it from the compile template file.</p>

      <h2>Handlebars <small><span class="mim">handlebars</span> <span class="command">["hbs", "handlebars"]</span></small></h2>
      <p><a href="http://handlebarsjs.com/">Handlebars</a> is the default templating langauge. To access a Handlebars template originating from a file named "example.hbs", do this...</p>

      <pre>var html = templates.example({})</pre>

      <p>...passing in JSON data the template needs to render.</p>

      <p>Handlebars also provides the ability to code reusable helper methods in pure JavaScript. You can code those in the meta-language of your choosing inside the <code class="option">compilers.template.helperFiles</code> files. The helpers and the templates are all pulled together via requirejs.</p>

      <p>Because all of the templates are compiled together, partials, <code class="option">{{example-partial}}</code>, are immediately available without any extra work.</p>

      <h2>Dust <small><span class="mim">dust</span> <span class="command">["dust"]</span></small></h2>

      <p>To access a <a href="https://github.com/linkedin/dustjs/">Dust</a> template originating from a file named "example.dust", do this...</p>

      <pre>templates.render('example', {}, (err, html) -> $(element).append(html))</pre>

      <p>You can reference dust partials, <code class="option">{>example_partial/}</code>, and they will be available because all the templates are merged together.</p>

      <h2>Hogan <small><span class="mim">hogan</span> <span class="command">["hog", "hogan"]</span></small></h2>

      <p>To access a <a href="http://twitter.github.com/hogan.js/">Hogan</a> template originating from a file named "example.hogan", do this...</p>

      <pre>templates.example.render({}, templates)</pre>

      <p>Note the passing of the templates object into the render method. This isn't necessary, but if you use partials, it is all you'll need to do to make partials work since all partials are included in the compiled template file.  Hogan's partials are available as normal, <code class="option">{{>example-partial}}</code>.
      </p>

      <h2>Jade <small><span class="mim">jade</span> <span class="command">["jade"]</span></small></h2>

      <p>To access a <a href="http://jade-lang.com/">Jade</a> template originating from a file named "example.jade", do this...</p>

      <pre>var html = templates.example({})</pre>

      <p>Including a partial is a piece of cake: <code class="option">include example-partial</code>.

      <h2>Underscore <small><span class="mim">underscore</span> <span class="command">["tpl", "underscore"]</span></small></h2>

      <p>To access an <a href="http://underscorejs.org/">Underscore</a> template originating from a file named "example.tpl", do this...</p>

      <pre>var html = templates.example({})</pre>

      <h2>Lodash <small><span class="mim">lodash</span> <span class="command">["tpl", "lodash"]</span></small></h2>

      <p>To access a <a href="http://lodash.com/">LoDash</a> template originating from a file named "example.lodash", do this...</p>

      <pre>var html = templates.example({})</pre>

      <h2>HTML <small><span class="mim">html</span> <span class="command">["template"]</span></small></h2>

      <p>If you just want to use plain HTML templates, you can do that too.</p>

      <p>To access a plain HTML template originating from a file named "example.template", do this...</p>

      <pre>var html = templates.example</pre>

      <p>Full disclosure: Mimosa uses Underscore under the hood to handle getting your plain HTML templates to the browser as strings. In this case, the Underscore compiler has been made so that it'll not understand it's usual delimiters for code or interpolation, and the resulting compiled Underscore templates are delivered as self-executing.</p>

    </section>
    <section id="copy">
      <div class="page-header">
        <h1>
          Copy "Compiler" <small><span class="command">["js", "css", "png", "jpg", "jpeg", "gif", "html", "eot", "svg", "ttf", "woff", "otf", "yaml"] </span></small>
        </h1>
      </div>
      <p>Have some legacy JavaScript code that you don't have the time to convert to CoffeeScript? Or maybe you are using jQuery UI and have all sorts of images embedded within your stylesheet directories? Mimosa maintains a list of extensions that it will simply copy from your assets directory to your public directory.  Because of the copy compiler, your images, plain JavaScript, CSS and more can live in the same place as the rest of your code and you do not have to worry about those files being left out.</p>

      <p>Additionally, the CSS and JavaScript (.css and .js) that the copy compiler picks up will be run through <a href="http://www.jshint.com/">jshint</a> and <a href="http://csslint.net/">csslint</a> just like your compiled code does. Linting for copied assets can be turned on and off separately from compiled assets.  Also, often the .css and .js are vendor assets, and those also have their own configuration separate from both the compiled and copied assets.  Any assets contained in a <code class="option">vendor</code> directory are treated as vendor assets.
      </p>

      <p>If you find yourself needing to update the default list of extensions for the copy compiler, consider <a href="https://github.com/dbashford/mimosa/issues">submitting an issue</a> to have your new extensions added to Mimosa's defaults.
      </p>

    </section>
    <section id="more">
      <div class="page-header">
        <h1>
          Don't See Your Favorite?
        </h1>
      </div>
      If you don't see your favorite meta-language or library, <a href="https://github.com/dbashford/mimosa/issues">file an issue</a> and we'll look into adding support for it!
    </section>
  </section>

</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>
<script src="js/vendor/bootstrap-collapse.js"></script>
<script src="js/vendor/bootstrap-scrollspy.js"></script>

<!-- scripts concatenated and minified via build script -->
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<!-- end scripts -->

<script>
    var _gaq=[['_setAccount','UA-33737130-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>
